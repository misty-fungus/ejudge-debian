<%
%><%@include "includes.csp"
%><%
#include "ejudge/cpu.h"
%><%@set getter_name = "csp_get_cnts_edit_cur_global_page"
%><%@set ac_prefix = "SSERV_CMD_"
%><%@set err_prefix = "SSERV_ERR_"
%><%@page csp_view_cnts_edit_cur_global_page(PageInterface *pg, FILE *log_f, FILE *out_f, struct http_request_info *phr)
%><%@include "stdvars.csp"
%><%
    unsigned char subtitle_buf[1024];
    const unsigned char *title = 0;
    const unsigned char *subtitle = subtitle_buf;
    opcap_t caps = 0;
    int row = 1;
    int cur_page = 2;

    unsigned char contest_time_str[64];
    unsigned char board_fog_time_str[64];
    unsigned char board_unfog_time_str[64];
    const unsigned char *standings_locale = NULL;
    const unsigned char *checker_locale = NULL;
    int cpu_bogomips = cpu_get_bogomips();

static const unsigned char * const form_row_attrs[]=
{
  " bgcolor=\"#d0d0d0\"",
  " bgcolor=\"#e0e0e0\"",
};

    if (phr->priv_level != PRIV_LEVEL_ADMIN) FAIL(SSERV_ERR_PERMISSION_DENIED);
    if (ejudge_cfg_opcaps_find(phr->config, phr->login, &caps) < 0) FAIL(SSERV_ERR_PERMISSION_DENIED);
    if (opcaps_check(caps, OPCAP_EDIT_CONTEST) < 0) FAIL(SSERV_ERR_PERMISSION_DENIED);
    if (!phr->ss->edited_cnts) FAIL(SSERV_ERR_CONTEST_NOT_EDITED);

    snprintf(subtitle_buf, sizeof(subtitle_buf), "editing serve.cfg, global settings");
    cnts = phr->ss->edited_cnts;
    struct section_global_data *global = phr->ss->global;
    int score_system;
    unsigned char *xstr = 0;
%><%@include "header_jqgrid.csp"
%>

<%@include "cnts_edit_cur_top_menu.csp"
%>

<%
  if (phr->ss->serve_parse_errors) {
%>
<h2><tt>serve.cfg</tt> cannot be edited</h2>
<font color="red"><pre><s:v value="phr->ss->serve_parse_errors" /></pre></font>
<%
    goto bottom_links;
  }
%>

<%
  if (!global) {
%>
<h2>No current global settings!</h2>
<%
    goto bottom_links;
  }
%>

<div id="MainDialogDiv" title="Main Properties" style="overflow: auto;">
    <s:form id="MainDialogForm">
        <s:hidden name="action" ac="glob-save-main-form" />
        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-contest_time">Contest time (HH:MM):</label></div>
            <s:textfield size="10" name="contest_time" id="main-contest_time" value="" class="text ui-widget-content ui-corner-all" onchange="mainDialogOnChange()" />
        </div>

        <div id="main-contest_finish_time-div">
            <div style="width: 300px; display: inline-block;"><label for="main-contest_finish_time_time">Contest end time:</label></div>
            <input id="main-contest_finish_time_time" type="text" name="contest_finish_time_time" class="time" size="6" class="text ui-widget-content ui-corner-all" />
            <input id="main-contest_finish_time_date" type="text" name="contest_finish_time_date" size="10" class="text ui-widget-content ui-corner-all" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-score_system">Scoring System:</label></div>
            <select id="main-score_system" name="score_system">
                <option value="0">ACM</option>
                <option value="1">Kirov</option>
                <option value="2">Olympiad</option>
                <option value="3">Moscow</option>
                <option value="4">Virtual ACM</option>
                <option value="5">Virtual Olympiad</option>
            </select>
        </div>

        <div id="main-board_fog_time-div">
            <div style="width: 300px; display: inline-block;"><label for="main-board_fog_time">Standings freeze time (HH:MM) before finish:</label></div>
            <s:textfield size="10" name="board_fog_time" id="main-board_fog_time" value="" class="text ui-widget-content ui-corner-all" onchange="mainDialogOnChange()" />
        </div>

        <div id="main-board_unfog_time-div">
            <div style="width: 300px; display: inline-block;"><label for="main-board_unfog_time">Standings unfreeze time (HH:MM) after finish:</label></div>
            <s:textfield size="10" name="board_unfog_time" id="main-board_unfog_time" value="" class="text ui-widget-content ui-corner-all" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-use_compilation_server">Use the default compilation server:</label></div>
            <input type="checkbox" name="use_compilation_server" id="main-use_compilation_server" value="1" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-enable_win32_languages">Enable Win32 languages:</label></div>
            <input type="checkbox" name="enable_win32_languages" id="main-enable_win32_languages" value="1" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-separate_user_score">Calculate and store user-visible score separately:</label></div>
            <input type="checkbox" name="separate_user_score" id="main-separate_user_score" value="1" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-secure_run">Run programs securely:</label></div>
            <input type="checkbox" name="secure_run" id="main-secure_run" value="1" onchange="mainDialogOnChange()" />
        </div>

        <div id="main-enable_memory_limit_error-div">
            <div style="width: 300px; display: inline-block;"><label for="main-enable_memory_limit_error">Enable support for MemoryLimit error:</label></div>
            <input type="checkbox" name="enable_memory_limit_error" id="main-enable_memory_limit_error" value="1" />
        </div>

        <div id="main-detect_violations-div">
            <div style="width: 300px; display: inline-block;"><label for="main-detect_violations">Detect security violations:</label></div>
            <input type="checkbox" name="detect_violations" id="main-detect_violations" value="1" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-enable_max_stack_size">Assume max_stack_size == max_vm_size:</label></div>
            <input type="checkbox" name="enable_max_stack_size" id="main-enable_max_stack_size" value="1" />
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-standings_locale">Standings locale:</label></div>
<% l10n_html_locale_select_3(out_f, "main-standings_locale", NULL, "standings_locale", NULL, -1); %>
        </div>

        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-checker_locale">Checker locale:</label></div>
<% l10n_html_locale_select_3(out_f, "main-checker_locale", NULL, "checker_locale", NULL, -1); %>
        </div>

<%
  if (sizeof(long) == sizeof(long long)) {
%>
        <div>
            <div style="width: 300px; display: inline-block;"><label for="main-enable_32bit_checkers">Compile 32-bit checkers on 64-bit platforms:</label></div>
            <input type="checkbox" name="enable_32bit_checkers" id="main-enable_32bit_checkers" value="1" />
        </div>
<%
  } else {
%>
        <input type="hidden" name="enable_32bit_checkers" id="main-enable_32bit_checkers" value="" />
<%
  }
%>

    </s:form>
</div>

<div id="CapsDialogDiv" title="Contestant Capabilities" style="overflow: auto;">
    <s:form id="CapsDialogForm">
        <s:hidden name="action" ac="glob-save-capabilities-form" />

<%
  static const unsigned char * caps_fields[][2] =
  {
    { "team_enable_src_view", "Contestants may view submitted source code" },
    { "disable_failed_test_view", "Contestants may not view failed test number" },
    { "team_enable_rep_view", "Contestants may view testing protocol" },
    { "team_enable_ce_view", "Contestants may view compilation errors" },
    { "team_show_judge_report", "Contestants may view FULL testing protocol" },
    { "report_error_code", "Contestants may view process exit code" },
    { "disable_clars", "Clarification requests are disabled" },
    { "disable_team_clars", "Contestants may not send clarification requests" },
    { "enable_eoln_select", "Contestants may select desired EOLN type" },
    { "disable_submit_after_ok", "Disable submit of already solved problems" },
    { "ignore_compile_errors", "Compilation errors are not counted as failed runs" },
    { "ignore_duplicated_runs", "Identical submits of one contestant are ignored" },
    { "show_deadline", "Show submit deadline in problem selection menu" },
    { "show_sha1", "Show abbreviated SHA1 in the submit list" },
    { "show_judge_identity", "Disclose judge identity in clar replies" },
    { "enable_printing", "Contestants may print their submits" },
    { "disable_banner_page", "Disable banner page on print-outs" },
    { "printout_uses_login", "Show login (not name) on printouts" },
    { "prune_empty_users", "Hide contestants without submits in standings" },
    { "enable_full_archive", "Store FULL program output in an archive" },
    { "always_show_problems", "Contestants may view Problems link before start" },
    { "disable_user_standings", "Disable build-in standings in new-client" },
    { "disable_language", "Disable language column in new-client" },
    { "problem_navigation", "Advanced problem navigation" },
    { "vertical_navigation", "Place problem navigation vertically" },
    { "disable_virtual_start", "Disable user Virtual start button" },
    { "disable_virtual_auto_judge", "Disable auto-judging after virtual olympiad" },
    { "enable_auto_print_protocol", "Enable automatic protocol printing" },
    { "notify_clar_reply", "Enable e-mail clar notifications" },
    { "notify_status_change", "Enable e-mail status change notifications" },
    { "disable_auto_refresh", "Disable auto-refreshing" },

    { NULL, NULL },
  };
  int caps_ind;

  for (caps_ind = 0; caps_fields[caps_ind][0]; ++caps_ind) {
%>
        <div id="caps-<s:v value="caps_fields[caps_ind][0]" escape="false" />-div">
            <div style="width: 300px; display: inline-block;"><label for="caps-<s:v value="caps_fields[caps_ind][0]" escape="false"/>-cb"><s:v value="caps_fields[caps_ind][1]" escape="false"/>:</label></div>
            <input type="checkbox" name="<s:v value="caps_fields[caps_ind][0]" escape="false"/>" id="caps-<s:v value="caps_fields[caps_ind][0]" escape="false"/>-cb" value="1" onchange="capsDialogOnChange()" />
        </div>
<%
  }
%>
    </s:form>
</div>

<div id="FilesDialogDiv" title="Files and Directories" style="overflow: auto;">
    <s:form id="FilesDialogForm">
        <s:hidden name="action" ac="glob-save-files-form" />

        <div id="files-advanced_layout-div">
            <div style="width: 300px; display: inline-block;"><label for="files-advanced_layout">Advanced problem files layout:</label></div>
            <input type="checkbox" name="advanced_layout" id="files-advanced_layout" value="1" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-uuid_run_store-div">
            <div style="width: 300px; display: inline-block;"><label for="files-uuid_run_store">Use UUID instead of run_id to store runs:</label></div>
            <input type="checkbox" name="uuid_run_store" id="files-uuid_run_store" value="1" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-test_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="files-test_dir">Directory for tests:</label></div>
            <s:textfield size="48" name="test_dir" id="files-test_dir" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-corr_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="files-corr_dir">Directory for correct answers:</label></div>
            <s:textfield size="48" name="corr_dir" id="files-corr_dir" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-info_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="files-info_dir">Directory for test info files:</label></div>
            <s:textfield size="48" name="info_dir" id="files-info_dir" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-tgz_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="files-tgz_dir">Directory for test tgz files:</label></div>
            <s:textfield size="48" name="tgz_dir" id="files-tgz_dir" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-checker_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="files-checker_dir">Directory for checkers:</label></div>
            <s:textfield size="48" name="checker_dir" id="files-checker_dir" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-statement_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="files-statement_dir">Directory for problem statements:</label></div>
            <s:textfield size="48" name="statement_dir" id="files-statement_dir" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-contest_start_cmd-div">
            <div style="width: 300px; display: inline-block;"><label for="files-contest_start_cmd">Contest start script:</label></div>
            <s:textfield size="48" name="contest_start_cmd" id="files-contest_start_cmd" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
        <div id="files-contest_stop_cmd-div">
            <div style="width: 300px; display: inline-block;"><label for="files-contest_stop_cmd">Contest stop script:</label></div>
            <s:textfield size="48" name="contest_stop_cmd" id="files-contest_stop_cmd" value="" class="text ui-widget-content ui-corner-all" onchange="filesDialogOnChange()" />
        </div>
    </s:form>
</div>

<div id="QuotasDialogDiv" title="Contestant Quotas" style="overflow: auto;">
    <s:form id="QuotasDialogForm">
        <s:hidden name="action" ac="glob-save-quotas-form" />

        <div id="quotas-max_run_size-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-max_run_size">Maximum size of one submitted program:</label></div>
            <s:textfield size="48" name="max_run_size" id="quotas-max_run_size" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="quotas-max_run_total-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-max_run_total">Maximum total size of all submitted programs:</label></div>
            <s:textfield size="48" name="max_run_total" id="quotas-max_run_total" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="quotas-max_run_num-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-max_run_num">Maximum number of submits:</label></div>
            <s:textfield size="48" name="max_run_num" id="quotas-max_run_num" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="quotas-max_clar_size-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-max_clar_size">Maximum size of one clarification request:</label></div>
            <s:textfield size="48" name="max_clar_size" id="quotas-max_clar_size" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="quotas-max_clar_total-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-max_clar_total">Maximum size of all clarification requests:</label></div>
            <s:textfield size="48" name="max_clar_total" id="quotas-max_clar_total" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="quotas-max_clar_num-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-max_clar_num">Maximum number of clarification requests:</label></div>
            <s:textfield size="48" name="max_clar_num" id="quotas-max_clar_num" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="quotas-team_page_quota-div">
            <div style="width: 300px; display: inline-block;"><label for="quotas-team_page_quota">Maximum number of printed pages:</label></div>
            <s:textfield size="48" name="team_page_quota" id="quotas-team_page_quota" value="" class="text ui-widget-content ui-corner-all" />
        </div>
    </s:form>
</div>

<div id="UrlsDialogDiv" title="Standing Files and URLs" style="overflow: auto;">
    <s:form id="UrlsDialogForm">
        <s:hidden name="action" ac="glob-save-urls-form" />

        <div id="urls-team_info_url-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-team_info_url">URL to view detailed contestant information:</label></div>
            <s:textfield size="48" name="team_info_url" id="urls-team_info_url" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-prob_info_url-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-prob_info_url">URL to view problem statement:</label></div>
            <s:textfield size="48" name="prob_info_url" id="urls-prob_info_url" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-standings_file_name-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-standings_file_name">Name of the current standings file:</label></div>
            <s:textfield size="48" name="standings_file_name" id="urls-standings_file_name" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-users_on_page-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-users_on_page">Number of users on standings page:</label></div>
            <s:textfield size="48" name="users_on_page" id="urls-users_on_page" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand_header_file-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand_header_file">HTML header file for the standings:</label></div>
            <s:textfield size="48" name="stand_header_file" id="urls-stand_header_file" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand_footer_file-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand_footer_file">HTML footer file for the standings:</label></div>
            <s:textfield size="48" name="stand_footer_file" id="urls-stand_footer_file" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand_symlink_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand_symlink_dir">Directory to make standings symlink:</label></div>
            <s:textfield size="48" name="stand_symlink_dir" id="urls-stand_symlink_dir" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand_ignore_after-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand_ignore_after">Ignore submissions after:</label></div>
            <input id="urls-stand_ignore_after_time" type="text" name="stand_ignore_after_time" class="time" size="6" class="text ui-widget-content ui-corner-all" />
            <input id="urls-stand_ignore_after_date" type="text" name="stand_ignore_after_date" size="10" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-enable_stand2-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-enable_stand2">Enable supplementary standings table:</label></div>
            <input type="checkbox" name="enable_stand2" id="urls-enable_stand2" value="1" onchange="urlsDialogOnChange()" />
        </div>
        <div id="urls-stand2_file_name-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand2_file_name">Name of the supplementary standings file:</label></div>
            <s:textfield size="48" name="stand2_file_name" id="urls-stand2_file_name" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand2_header_file-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand2_header_file">HTML header file for the supplementary standings:</label></div>
            <s:textfield size="48" name="stand2_header_file" id="urls-stand2_header_file" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand2_footer_file-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand2_footer_file">HTML footer file for the supplementary standings:</label></div>
            <s:textfield size="48" name="stand2_footer_file" id="urls-stand2_footer_file" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-stand2_symlink_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-stand2_symlink_dir">Directory to make suppl. standings symlink:</label></div>
            <s:textfield size="48" name="stand2_symlink_dir" id="urls-stand2_symlink_dir" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-enable_plog-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-enable_plog">Enable public submission log:</label></div>
            <input type="checkbox" name="enable_plog" id="urls-enable_plog" value="1" onchange="urlsDialogOnChange()" />
        </div>
        <div id="urls-plog_file_name-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-plog_file_name">Name of the public submission log file:</label></div>
            <s:textfield size="48" name="plog_file_name" id="urls-plog_file_name" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-plog_header_file-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-plog_header_file">HTML header file for the public submission log:</label></div>
            <s:textfield size="48" name="plog_header_file" id="urls-plog_header_file" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-plog_footer_file-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-plog_footer_file">HTML footer file for the public submission log:</label></div>
            <s:textfield size="48" name="plog_footer_file" id="urls-plog_footer_file" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-plog_symlink_dir-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-plog_symlink_dir">Directory to make symlink to public submission log:</label></div>
            <s:textfield size="48" name="plog_symlink_dir" id="urls-plog_symlink_dir" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-plog_update_time-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-plog_update_time">Public submission log update interval (sec):</label></div>
            <s:textfield size="48" name="plog_update_time" id="urls-plog_update_time" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-external_xml_update_time-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-external_xml_update_time">External XML log update interval (sec):</label></div>
            <s:textfield size="48" name="external_xml_update_time" id="urls-external_xml_update_time" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="urls-internal_xml_update_time-div">
            <div style="width: 300px; display: inline-block;"><label for="urls-internal_xml_update_time">Internal XML log update interval (sec):</label></div>
            <s:textfield size="48" name="internal_xml_update_time" id="urls-internal_xml_update_time" value="" class="text ui-widget-content ui-corner-all" />
        </div>
    </s:form>
</div>

<div id="AttrsDialogDiv" title="HTML Attributes" style="overflow: auto;">
    <s:form id="AttrsDialogForm">
        <s:hidden name="action" ac="glob-save-attrs-form" />
        <div id="attrs-stand_fancy_style-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_fancy_style">Use fancy decorations:</label></div>
            <input type="checkbox" name="stand_fancy_style" id="attrs-stand_fancy_style" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_success_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_success_attr">HTML attributes for &quot;Last success&quot; note:</label></div>
            <s:textfield size="48" name="stand_success_attr" id="attrs-stand_success_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_table_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_table_attr">HTML attributes for standings table:</label></div>
            <s:textfield size="48" name="stand_table_attr" id="attrs-stand_table_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_row_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_row_attr">Standings row attributes:</label></div>
            <s:textfield size="48" name="stand_row_attr" id="attrs-stand_row_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_place_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_place_attr">HTML attributes for the &quot;Place&quot; column:</label></div>
            <s:textfield size="48" name="stand_place_attr" id="attrs-stand_place_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_team_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_team_attr">HTML attributes for the &quot;Team name&quot; column:</label></div>
            <s:textfield size="48" name="stand_team_attr" id="attrs-stand_team_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_prob_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_prob_attr">HTML attributes for the &quot;Problems&quot; column:</label></div>
            <s:textfield size="48" name="stand_prob_attr" id="attrs-stand_prob_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_solved_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_solved_attr">HTML attributes for the &quot;Solved&quot; column:</label></div>
            <s:textfield size="48" name="stand_solved_attr" id="attrs-stand_solved_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_score_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_score_attr">HTML attributes for the &quot;Score&quot; column:</label></div>
            <s:textfield size="48" name="stand_score_attr" id="attrs-stand_score_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_penalty_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_penalty_attr">HTML attributes for the &quot;Penalty&quot; column:</label></div>
            <s:textfield size="48" name="stand_penalty_attr" id="attrs-stand_penalty_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_use_login-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_use_login">Use login instead of name:</label></div>
            <input type="checkbox" name="stand_use_login" id="attrs-stand_use_login" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_show_ok_time-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_show_ok_time">Show success time in standings:</label></div>
            <input type="checkbox" name="stand_show_ok_time" id="attrs-stand_show_ok_time" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_show_att_num-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_show_att_num">Show number of attempts in standings:</label></div>
            <input type="checkbox" name="stand_show_att_num" id="attrs-stand_show_att_num" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_sort_by_solved-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_sort_by_solved">Sort participants by the solved problems first:</label></div>
            <input type="checkbox" name="stand_sort_by_solved" id="attrs-stand_sort_by_solved" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_enable_penalty-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_enable_penalty">Enable time penalties:</label></div>
            <input type="checkbox" name="stand_enable_penalty" id="attrs-stand_enable_penalty" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-ignore_success_time-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-ignore_success_time">Ignore success time in penalty calculation:</label></div>
            <input type="checkbox" name="ignore_success_time" id="attrs-ignore_success_time" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_time_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_time_attr">HTML attributes for the success time:</label></div>
            <s:textfield size="48" name="stand_time_attr" id="attrs-stand_time_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_fail_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_fail_attr">HTML attributes for &quot;Check failed&quot; cells:</label></div>
            <s:textfield size="48" name="stand_fail_attr" id="attrs-stand_fail_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_trans_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_trans_attr">HTML attributes for transient cells:</label></div>
            <s:textfield size="48" name="stand_trans_attr" id="attrs-stand_trans_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_disq_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_disq_attr">HTML attributes for &quot;Disqualified&quot; cells:</label></div>
            <s:textfield size="48" name="stand_disq_attr" id="attrs-stand_disq_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_self_row_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_self_row_attr">HTML attributes for the participant's table row:</label></div>
            <s:textfield size="48" name="stand_self_row_attr" id="attrs-stand_self_row_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_v_row_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_v_row_attr">HTML attributes for the virtual participant's rows:</label></div>
            <s:textfield size="48" name="stand_v_row_attr" id="attrs-stand_v_row_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_r_row_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_r_row_attr">HTML attributes for the real participant's rows:</label></div>
            <s:textfield size="48" name="stand_r_row_attr" id="attrs-stand_r_row_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_u_row_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_u_row_attr">HTML attributes for the unknown participant's rows:</label></div>
            <s:textfield size="48" name="stand_u_row_attr" id="attrs-stand_u_row_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-enable_extra_col-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-enable_extra_col">Show &quot;Extra information&quot; column:</label></div>
            <input type="checkbox" name="enable_extra_col" id="attrs-enable_extra_col" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_extra_format-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_extra_format">Format string for &quot;Extra information&quot; column:</label></div>
            <s:textfield size="48" name="stand_extra_format" id="attrs-stand_extra_format" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_extra_legend-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_extra_legend">Column title for &quot;Extra information&quot; column:</label></div>
            <s:textfield size="48" name="stand_extra_legend" id="attrs-stand_extra_legend" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_extra_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_extra_attr">HTML attributes for &quot;Extra information&quot; column:</label></div>
            <s:textfield size="48" name="stand_extra_attr" id="attrs-stand_extra_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_show_warn_number-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_show_warn_number">Show &quot;Warnings&quot; column:</label></div>
            <input type="checkbox" name="stand_show_warn_number" id="attrs-stand_show_warn_number" value="1" onchange="attrsDialogOnChange()" />
        </div>
        <div id="attrs-stand_warn_number_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_warn_number_attr">HTML attributes for &quot;Warnings&quot; column:</label></div>
            <s:textfield size="48" name="stand_warn_number_attr" id="attrs-stand_warn_number_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_page_table_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_page_table_attr">HTML attributes for page table:</label></div>
            <s:textfield size="48" name="stand_page_table_attr" id="attrs-stand_page_table_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_page_cur_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_page_cur_attr">HTML attributes for current page message:</label></div>
            <s:textfield size="48" name="stand_page_cur_attr" id="attrs-stand_page_cur_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_page_row_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_page_row_attr">Page table row attributes:</label></div>
            <s:textfield size="48" name="stand_page_row_attr" id="attrs-stand_page_row_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="attrs-stand_page_col_attr-div">
            <div style="width: 300px; display: inline-block;"><label for="attrs-stand_page_col_attr">Page table column attributes:</label></div>
            <s:textfield size="48" name="stand_page_col_attr" id="attrs-stand_page_col_attr" value="" class="text ui-widget-content ui-corner-all" />
        </div>
    </s:form>
</div>

<div id="AdvancedDialogDiv" title="Advanced Properties" style="overflow: auto;">
    <s:form id="AdvancedDialogForm">
        <s:hidden name="action" ac="glob-save-advanced-form" />

        <div id="adv-appeal_deadline-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-appeal_deadline_time">Appeal deadline:</label></div>
            <input id="adv-appeal_deadline_time" type="text" name="appeal_deadline_time" class="time" size="6" class="text ui-widget-content ui-corner-all" />
            <input id="adv-appeal_deadline_date" type="text" name="appeal_deadline_date" size="10" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-autoupdate_standings-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-autoupdate_standings">Update standings automatically:</label></div>
            <input type="checkbox" name="autoupdate_standings" id="adv-autoupdate_standings" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-use_ac_not_ok-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-use_ac_not_ok">Use PR status instead of OK:</label></div>
            <input type="checkbox" name="use_ac_not_ok" id="adv-use_ac_not_ok" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-rounding_mode-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-rounding_mode">Seconds to minutes rounding mode:</label></div>
            <select id="adv-rounding_mode" name="rounding_mode">
                <option value="0">Truncating up (ceil)</option>
                <option value="1">Truncating down (floor)</option>
                <option value="2">Rounding</option>
            </select>
        </div>
        <div id="adv-max_file_length-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-max_file_length">Maximal file size to be included into testing protocol:</label></div>
            <s:textfield size="48" name="max_file_length" id="adv-max_file_length" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-max_line_length-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-max_line_length">Maximal line length to be included into testing protocol:</label></div>
            <s:textfield size="48" name="max_line_length" id="adv-max_line_length" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-inactivity_timeout-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-inactivity_timeout">Inactivity timeout:</label></div>
            <s:textfield size="48" name="inactivity_timeout" id="adv-inactivity_timeout" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-ignore_bom-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-ignore_bom">Ignore BOM in text submits:</label></div>
            <input type="checkbox" name="ignore_bom" id="adv-ignore_bom" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-disable_testing-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-disable_testing">Disable any testing of submissions:</label></div>
            <input type="checkbox" name="disable_testing" id="adv-disable_testing" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-disable_auto_testing-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-disable_auto_testing">Disable automatic testing of submissions:</label></div>
            <input type="checkbox" name="disable_auto_testing" id="adv-disable_auto_testing" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-show_astr_time-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-show_astr_time">Show astronomic time instead of relative time:</label></div>
            <input type="checkbox" name="show_astr_time" id="adv-show_astr_time" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-enable_report_upload-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-enable_report_upload">Enable testing protocol upload:</label></div>
            <input type="checkbox" name="enable_report_upload" id="adv-enable_report_upload" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-enable_runlog_merge-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-enable_runlog_merge">Enable run database importing and merging:</label></div>
            <input type="checkbox" name="enable_runlog_merge" id="adv-enable_runlog_merge" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-disable_user_database-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-disable_user_database">Disable user database loading:</label></div>
            <input type="checkbox" name="disable_user_database" id="adv-disable_user_database" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-enable_l10n-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-enable_l10n">Enable message translation:</label></div>
            <input type="checkbox" name="enable_l10n" id="adv-enable_l10n" value="1" onchange="advancedDialogOnChange()" />
        </div>
        <div id="adv-charset-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-charset">Character set:</label></div>
            <s:textfield size="48" name="charset" id="adv-charset" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-standings_charset-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-standings_charset">Standings character set:</label></div>
            <s:textfield size="48" name="standings_charset" id="adv-standings_charset" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-stand2_charset-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-stand2_charset">Aux. standings character set:</label></div>
            <s:textfield size="48" name="stand2_charset" id="adv-stand2_charset" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-plog_charset-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-plog_charset">Submission log character set:</label></div>
            <s:textfield size="48" name="plog_charset" id="adv-plog_charset" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-cpu_bogomips-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-cpu_bogomips">CPU speed (BogoMIPS):</label></div>
            <s:textfield size="48" name="cpu_bogomips" id="adv-cpu_bogomips" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-load_user_group-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-load_user_group">User groups to load:</label></div>
            <s:textfield size="48" name="load_user_group" id="adv-load_user_group" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-clardb_plugin-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-clardb_plugin">ClarDB storage engine:</label></div>
            <s:textfield size="48" name="clardb_plugin" id="adv-clardb_plugin" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-rundb_plugin-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-rundb_plugin">RunDB storage engine:</label></div>
            <s:textfield size="48" name="rundb_plugin" id="adv-rundb_plugin" value="" class="text ui-widget-content ui-corner-all" />
        </div>
        <div id="adv-xuser_plugin-div">
            <div style="width: 400px; display: inline-block;"><label style="display:block; width: 400px" for="adv-xuser_plugin">XuserDB storage engine:</label></div>
            <s:textfield size="48" name="xuser_plugin" id="adv-xuser_plugin" value="" class="text ui-widget-content ui-corner-all" />
        </div>
    </s:form>
</div>

<script type="text/javascript">
$(function() {
    $('#GlobalAccordion').accordion({ heightStyle: "content" });

    mainDialog = $("#MainDialogDiv").dialog({
        autoOpen: false,
        height: 450,
        width: 600,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#MainDialogForm").serialize();
                var formURL = $("#MainDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                mainDialog.dialog("close");
            }
        },
        close : function() {
        }
    });
    $('#main-contest_finish_time_time').timepicker({ 'timeFormat': 'H:i', 'step': 30 });
    $('#main-contest_finish_time_date').datepicker({ dateFormat: "yy-mm-dd", firstDay: 1, showButtonPanel: true });

    capsDialog = $("#CapsDialogDiv").dialog({
        autoOpen: false,
        height: 650,
        width: 600,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#CapsDialogForm").serialize();
                var formURL = $("#CapsDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                capsDialog.dialog("close");
            }
        },
        close : function() {
        }
    });

    $("#orig-disable_failed_test_view-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_ACM || global->score_system == SCORE_MOSCOW" />);
    $("#orig-team_enable_ce_view-div").toggle(<s:v type="jsbool" value="global->team_enable_rep_view <= 0" />);
    $("#orig-team_show_judge_report-div").toggle(<s:v type="jsbool" value="global->team_enable_rep_view > 0" />);
    $("#orig-report_error_code-div").toggle(<s:v type="jsbool" value="global->team_enable_rep_view > 0 && global->team_show_judge_report <= 0" />);
    $("#orig-disable_team_clars-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0" />);
    $("#orig-show_deadline-div").toggle(<s:v type="jsbool" value="global->contest_time <= 0" />);
    $("#orig-disable_banner_page-div").toggle(<s:v type="jsbool" value="global->enable_printing > 0" />);
    $("#orig-printout_uses_login-div").toggle(<s:v type="jsbool" value="global->enable_printing > 0 && global->disable_banner_page > 0" />);
    $("#orig-vertical_navigation-div").toggle(<s:v type="jsbool" value="global->problem_navigation > 0" />);
    $("#orig-disable_virtual_start-div").toggle(<s:v type="jsbool" value="global->is_virtual > 0" />);
    $("#orig-disable_virtual_auto_judge-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_OLYMPIAD" />);
    $("#orig-enable_auto_print_protocol-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_OLYMPIAD" />);

    filesDialog = $("#FilesDialogDiv").dialog({
        autoOpen: false,
        height: 500,
        width: 600,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#FilesDialogForm").serialize();
                var formURL = $("#FilesDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                filesDialog.dialog("close");
            }
        },
        close : function() {
        }
    });

    $("#orig-test_dir-div").toggle(<s:v type="jsbool" value="global->advanced_layout <= 0" />);
    $("#orig-corr_dir-div").toggle(<s:v type="jsbool" value="global->advanced_layout <= 0" />);
    $("#orig-info_dir-div").toggle(<s:v type="jsbool" value="global->advanced_layout <= 0" />);
    $("#orig-tgz_dir-div").toggle(<s:v type="jsbool" value="global->advanced_layout <= 0" />);
    $("#orig-checker_dir-div").toggle(<s:v type="jsbool" value="global->advanced_layout <= 0" />);
    $("#orig-statement_dir-div").toggle(<s:v type="jsbool" value="global->advanced_layout <= 0" />);

    quotasDialog = $("#QuotasDialogDiv").dialog({
        autoOpen: false,
        height: 500,
        width: 600,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#QuotasDialogForm").serialize();
                var formURL = $("#QuotasDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                quotasDialog.dialog("close");
            }
        },
        close : function() {
        }
    });

    $("#orig-max_clar_size-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0 && global->disable_team_clars <= 0" />);
    $("#orig-max_clar_total-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0 && global->disable_team_clars <= 0" />);
    $("#orig-max_clar_num-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0 && global->disable_team_clars <= 0" />);
    $("#orig-team_page_quota-div").toggle(<s:v type="jsbool" value="global->enable_printing > 0" />);
    $("#quotas-max_clar_size-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0 && global->disable_team_clars <= 0" />);
    $("#quotas-max_clar_total-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0 && global->disable_team_clars <= 0" />);
    $("#quotas-max_clar_num-div").toggle(<s:v type="jsbool" value="global->disable_clars <= 0 && global->disable_team_clars <= 0" />);
    $("#quotas-team_page_quota-div").toggle(<s:v type="jsbool" value="global->enable_printing > 0" />);

    urlsDialog = $("#UrlsDialogDiv").dialog({
        autoOpen: false,
        height: 600,
        width: 850,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#UrlsDialogForm").serialize();
                var formURL = $("#UrlsDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                urlsDialog.dialog("close");
            }
        },
        close : function() {
        }
    });
    $('#urls-stand_ignore_after_time').timepicker({ 'timeFormat': 'H:i', 'step': 30 });
    $('#urls-stand_ignore_after_date').datepicker({ dateFormat: "yy-mm-dd", firstDay: 1, showButtonPanel: true });

    $("#orig-stand2_file_name-div").toggle(<s:v type="jsbool" value="phr->ss->enable_stand2" />);
    $("#orig-stand2_header_file-div").toggle(<s:v type="jsbool" value="phr->ss->enable_stand2" />);
    $("#orig-stand2_footer_file-div").toggle(<s:v type="jsbool" value="phr->ss->enable_stand2" />);
    $("#orig-stand2_symlink_dir-div").toggle(<s:v type="jsbool" value="phr->ss->enable_stand2" />);
    $("#orig-plog_file_name-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog" />);
    $("#orig-plog_header_file-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog" />);
    $("#orig-plog_footer_file-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog" />);
    $("#orig-plog_symlink_dir-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog" />);
    $("#orig-plog_update_time-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog" />);

    attrsDialog = $("#AttrsDialogDiv").dialog({
        autoOpen: false,
        height: 600,
        width: 850,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#AttrsDialogForm").serialize();
                var formURL = $("#AttrsDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                attrsDialog.dialog("close");
            }
        },
        close : function() {
        }
    });

    $("#orig-stand_success_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_table_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_row_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_place_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_team_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_prob_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_solved_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_score_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && (global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD)" />);
    $("#orig-stand_penalty_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && (global->score_system == SCORE_ACM || global->score_system == SCORE_MOSCOW)" />);
    $("#orig-stand_show_att_num-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#orig-stand_sort_by_solved-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#orig-stand_enable_penalty-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#orig-ignore_success_time-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_ACM || global->score_system == SCORE_MOSCOW" />);
    $("#orig-stand_time_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->stand_show_ok_time > 0" />);
    $("#orig-stand_fail_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_trans_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_disq_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0" />);
    $("#orig-stand_self_row_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->is_virtual > 0" />);
    $("#orig-stand_v_row_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->is_virtual > 0" />);
    $("#orig-stand_r_row_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->is_virtual > 0" />);
    $("#orig-stand_u_row_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->is_virtual > 0" />);
    $("#orig-stand_extra_format-div").toggle(<s:v type="jsbool" value="phr->ss->enable_extra_col > 0" />);
    $("#orig-stand_extra_legend-div").toggle(<s:v type="jsbool" value="phr->ss->enable_extra_col > 0" />);
    $("#orig-stand_extra_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && phr->ss->enable_extra_col > 0" />);
    $("#orig-stand_warn_number_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->stand_show_warn_number > 0" />);
    $("#orig-stand_page_table_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->users_on_page > 0" />);
    $("#orig-stand_page_cur_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->users_on_page > 0" />);
    $("#orig-stand_page_row_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->users_on_page > 0" />);
    $("#orig-stand_page_col_attr-div").toggle(<s:v type="jsbool" value="global->stand_fancy_style <= 0 && global->users_on_page > 0" />);

    advancedDialog = $("#AdvancedDialogDiv").dialog({
        autoOpen: false,
        height: 600,
        width: 850,
        modal: true,
        buttons: {
            "Save": function() {
                var postData = $("#AdvancedDialogForm").serialize();
                var formURL = $("#AdvancedDialogForm").attr("action");
                $.ajax({
                    url : formURL,
                    type: "POST",
                    data : postData,
                    success:function(data, textStatus, jqXHR) {
                        //data: return data from server
                        document.location.reload(true);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //if fails     
                    }
                });
            },
            Cancel: function() {
                advancedDialog.dialog("close");
            }
        },
        close : function() {
        }
    });
    $('#adv-appeal_deadline_time').timepicker({ 'timeFormat': 'H:i', 'step': 30 });
    $('#adv-appeal_deadline_date').datepicker({ dateFormat: "yy-mm-dd", firstDay: 1, showButtonPanel: true });

    $("#orig-disable_auto_testing-div").toggle(<s:v type="jsbool" value="global->disable_testing <= 0" />);
    $("#orig-stand2_charset-div").toggle(<s:v type="jsbool" value="phr->ss->enable_stand2 && global->stand2_file_name[0]" />);
    $("#orig-plog_charset-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog && global->plog_file_name[0]" />);
});

function np(e)
{
    if (e) e.stopPropagation();
}

function copyCheckbox(dst, src)
{
    var dstobj = document.getElementById(dst);
    var srcobj = document.getElementById(src);
    if (dstobj != null) {
        if (srcobj != null && srcobj.value == "1") {
            dstobj.checked = true;
        } else {
            dstobj.checked = false;
        }
    }
}

function popupMainDialog(e, skipField)
{
    $("#main-contest_time").val($("#orig-contest_time").val());
    $("#main-contest_finish_time_time").val($("#orig_contest_finish_time_time").val());
    $("#main-contest_finish_time_date").val($("#orig-contest_finish_time_date").val());
    $("#main-score_system").val($("#orig-score_system").val());
    $("#main-board_fog_time").val($("#orig-board_fog_time").val());
    $("#main-board_unfog_time").val($("#orig-board_unfog_time").val());
    copyCheckbox("main-use_compilation_server", "orig-use_compilation_server");
    copyCheckbox("main-enable_win32_languages", "orig-enable_win32_languages");
    copyCheckbox("main-separate_user_score", "orig-separate_user_score");
    copyCheckbox("main-secure_run", "orig-secure_run");
    copyCheckbox("main-enable_memory_limit_error", "orig-enable_memory_limit_error");
    copyCheckbox("main-detect_violations", "orig-detect_violations");
    copyCheckbox("main-enable_max_stack_size", "orig-enable_max_stack_size");
    $("#main-standings_locale").val($("#orig-standings_locale").val());
    $("#main-checker_locale").val($("#orig-checker_locale").val());
    copyCheckbox("main-enable_32bit_checkers", "orig-enable_32bit_checkers");

    if (skipField == "contest_time") {
        $("#main-contest_time").val("");
    } else if (skipField == "contest_finish_time") {
        $("#main-contest_finish_time_time").val("");
        $("#main-contest_finish_time_date").val("");
    } else if (skipField == "board_fog_time") {
        $("#main-board_fog_time").val("");
    } else if (skipField == "board_unfog_time") {
        $("#main-board_unfog_time").val("");
    } else if (skipField == "standings_locale") {
        $("#main-standings_locale").val("");
    } else if (skipField == "checker_locale") {
        $("#main-checker_locale").val("");
    }

    if (e) e.stopPropagation();
    mainDialogOnChange();
    $("#MainDialogDiv").dialog('open');
}

function mainDialogOnChange()
{
    var contest_time = document.getElementById("main-contest_time").value;
    if (contest_time != null && contest_time != "") {
        document.getElementById("main-contest_finish_time-div").style.display = "none";
        document.getElementById("main-board_fog_time-div").style.display = "";
    } else {
        document.getElementById("main-contest_finish_time-div").style.display = "";
        document.getElementById("main-board_fog_time-div").style.display = "none";
    }

    var board_fog_time = document.getElementById("main-board_fog_time").value;
    if (contest_time != null && contest_time != "" && board_fog_time != null && board_fog_time != "") {
        document.getElementById("main-board_unfog_time-div").style.display = "";
    } else {
        document.getElementById("main-board_unfog_time-div").style.display = "none";
    }

    if (document.getElementById("main-secure_run").checked) {
        document.getElementById("main-enable_memory_limit_error-div").style.display = "";
        document.getElementById("main-detect_violations-div").style.display = "";
    } else {
        document.getElementById("main-enable_memory_limit_error-div").style.display = "none";
        document.getElementById("main-detect_violations-div").style.display = "none";
    }
}

function popupCapsDialog(e, skipField)
{
<%
  for (caps_ind = 0; caps_fields[caps_ind][0]; ++caps_ind) {
%>
    copyCheckbox("caps-<s:v value="caps_fields[caps_ind][0]" escape="false"/>-cb", "orig-<s:v value="caps_fields[caps_ind][0]" escape="false"/>");
<%
  }
%>
    if (e) e.stopPropagation();
    capsDialogOnChange();
    $("#CapsDialogDiv").dialog('open');
}

function capsDialogOnChange()
{
    $("#caps-disable_failed_test_view-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_ACM || global->score_system == SCORE_MOSCOW" />);
    $("#caps-team_enable_ce_view-div").toggle(!$("#caps-team_enable_rep_view-cb").is(':checked'));
    $("#caps-team_show_judge_report-div").toggle($("#caps-team_enable_rep_view-cb").is(':checked'));
    $("#caps-report_error_code-div").toggle($("#caps-team_enable_rep_view-cb").is(':checked') && !$("#caps-team_show_judge_report-cb").is(':checked'));
    $("#caps-disable_team_clars-div").toggle(!$("#caps-disable_clars-cb").is(':checked'));
    $("#caps-show_deadline-div").toggle(<s:v type="jsbool" value="global->contest_time <= 0" />);
    $("#caps-disable_banner_page-div").toggle($("#caps-enable_printing-cb").is(':checked'));
    $("#caps-printout_uses_login-div").toggle($("#caps-enable_printing-cb").is(':checked') && $("#caps-disable_banner_page-cb").is(':checked'));
    $("#caps-vertical_navigation-div").toggle($("#caps-problem_navigation-cb").is(':checked'));
    $("#caps-disable_virtual_start-div").toggle(<s:v type="jsbool" value="global->is_virtual > 0" />);
    $("#caps-disable_virtual_auto_judge-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_OLYMPIAD" />);
    $("#caps-enable_auto_print_protocol-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_OLYMPIAD" />);
}

function popupFilesDialog(e, skipField)
{
    copyCheckbox("files-advanced_layout", "orig-advanced_layout");
    copyCheckbox("files-uuid_run_store", "orig-uuid_run_store");
    $("#files-test_dir").val($("#orig-test_dir").val());
    $("#files-corr_dir").val($("#orig-corr_dir").val());
    $("#files-info_dir").val($("#orig-info_dir").val());
    $("#files-tgz_dir").val($("#orig-tgz_dir").val());
    $("#files-checker_dir").val($("#orig-checker_dir").val());
    $("#files-statement_dir").val($("#orig-statement_dir").val());
    $("#files-contest_start_cmd").val($("#orig-contest_start_cmd").val());
    $("#files-contest_stop_cmd").val($("#orig-contest_stop_cmd").val());

    if (skipField != null) {
        obj = document.getElementById("files-" + skipField);
        if (obj != null) {
            obj.value = "";
        }
    }

    if (e) e.stopPropagation();
    filesDialogOnChange();
    $("#FilesDialogDiv").dialog('open');
}

function filesDialogOnChange()
{
    $("#files-test_dir-div").toggle(!$("#files-advanced_layout").is(':checked'));
    $("#files-corr_dir-div").toggle(!$("#files-advanced_layout").is(':checked'));
    $("#files-info_dir-div").toggle(!$("#files-advanced_layout").is(':checked'));
    $("#files-tgz_dir-div").toggle(!$("#files-advanced_layout").is(':checked'));
    $("#files-checker_dir-div").toggle(!$("#files-advanced_layout").is(':checked'));
    $("#files-statement_dir-div").toggle(!$("#files-advanced_layout").is(':checked'));
}

function popupQuotasDialog(e, skipField)
{
    $("#quotas-max_run_size").val($("#orig-max_run_size").val());
    $("#quotas-max_run_total").val($("#orig-max_run_total").val());
    $("#quotas-max_run_num").val($("#orig-max_run_num").val());
    $("#quotas-max_clar_size").val($("#orig-max_clar_size").val());
    $("#quotas-max_clar_total").val($("#orig-max_clar_total").val());
    $("#quotas-max_clar_num").val($("#orig-max_clar_num").val());
    $("#quotas-team_page_quota").val($("#orig-team_page_quota").val());

    if (skipField != null) {
        obj = document.getElementById("quotas-" + skipField);
        if (obj != null) {
            obj.value = "";
        }
    }

    if (e) e.stopPropagation();
    $("#QuotasDialogDiv").dialog('open');
}

function popupUrlsDialog(e, skipField)
{
    $("#urls-team_info_url").val($("#orig-team_info_url").val());
    $("#urls-prob_info_url").val($("#orig-prob_info_url").val());
    $("#urls-standings_file_name").val($("#orig-standings_file_name").val());
    $("#urls-users_on_page").val($("#orig-users_on_page").val());
    $("#urls-stand_header_file").val($("#orig-stand_header_file").val());
    $("#urls-stand_footer_file").val($("#orig-stand_footer_file").val());
    $("#urls-stand_symlink_dir").val($("#orig-stand_symlink_dir").val());
    $("#urls-stand_ignore_after_time").val($("#orig-stand_ignore_after_time").val());
    $("#urls-stand_ignore_after_date").val($("#orig-stand_ignore_after_date").val());
    copyCheckbox("urls-enable_stand2", "orig-enable_stand2");
    $("#urls-stand2_file_name").val($("#orig-stand2_file_name").val());
    $("#urls-stand2_header_file").val($("#orig-stand2_header_file").val());
    $("#urls-stand2_footer_file").val($("#orig-stand2_footer_file").val());
    $("#urls-stand2_symlink_dir").val($("#orig-stand2_symlink_dir").val());
    copyCheckbox("urls-enable_plog", "orig-enable_plog");
    $("#urls-plog_file_name").val($("#orig-plog_file_name").val());
    $("#urls-plog_header_file").val($("#orig-plog_header_file").val());
    $("#urls-plog_footer_file").val($("#orig-plog_footer_file").val());
    $("#urls-plog_symlink_dir").val($("#orig-plog_symlink_dir").val());
    $("#urls-plog_update_time").val($("#orig-plog_update_time").val());
    $("#urls-external_xml_update_time").val($("#orig-external_xml_update_time").val());
    $("#urls-internal_xml_update_time").val($("#orig-internal_xml_update_time").val());

    if (skipField != null) {
        if (skipField == "stand_ignore_after") {
            obj = document.getElementById("urls-" + skipField + "_time");
            if (obj != null) obj.value = "";
            obj = document.getElementById("urls-" + skipField + "_date");
            if (obj != null) obj.value = "";
        } else {
            obj = document.getElementById("urls-" + skipField);
            if (obj != null) obj.value = "";
        }
    }

    if (e) e.stopPropagation();
    urlsDialogOnChange();
    $("#UrlsDialogDiv").dialog('open');
}

function urlsDialogOnChange()
{
    $("#urls-stand2_file_name-div").toggle($("#urls-enable_stand2").is(':checked'));
    $("#urls-stand2_header_file-div").toggle($("#urls-enable_stand2").is(':checked'));
    $("#urls-stand2_footer_file-div").toggle($("#urls-enable_stand2").is(':checked'));
    $("#urls-stand2_symlink_dir-div").toggle($("#urls-enable_stand2").is(':checked'));
    $("#urls-plog_file_name-div").toggle($("#urls-enable_plog").is(':checked'));
    $("#urls-plog_header_file-div").toggle($("#urls-enable_plog").is(':checked'));
    $("#urls-plog_footer_file-div").toggle($("#urls-enable_plog").is(':checked'));
    $("#urls-plog_symlink_dir-div").toggle($("#urls-enable_plog").is(':checked'));
    $("#urls-plog_update_time-div").toggle($("#urls-enable_plog").is(':checked'));
}

function popupAttrsDialog(e, skipField)
{
    copyCheckbox("attrs-stand_fancy_style", "orig-stand_fancy_style");
    $("#attrs-stand_success_attr").val($("#orig-stand_success_attr").val());
    $("#attrs-stand_table_attr").val($("#orig-stand_table_attr").val());
    $("#attrs-stand_row_attr").val($("#orig-stand_row_attr").val());
    $("#attrs-stand_place_attr").val($("#orig-stand_place_attr").val());
    $("#attrs-stand_team_attr").val($("#orig-stand_team_attr").val());
    $("#attrs-stand_prob_attr").val($("#orig-stand_prob_attr").val());
    $("#attrs-stand_solved_attr").val($("#orig-stand_solved_attr").val());
    $("#attrs-stand_score_attr").val($("#orig-stand_score_attr").val());
    $("#attrs-stand_penalty_attr").val($("#orig-stand_penalty_attr").val());
    copyCheckbox("attrs-stand_use_login", "orig-stand_use_login");
    copyCheckbox("attrs-stand_show_ok_time", "orig-stand_show_ok_time");
    copyCheckbox("attrs-stand_show_att_num", "orig-stand_show_att_num");
    copyCheckbox("attrs-stand_sort_by_solved", "orig-stand_sort_by_solved");
    copyCheckbox("attrs-stand_enable_penalty", "orig-stand_enable_penalty");
    copyCheckbox("attrs-ignore_success_time", "orig-ignore_success_time");
    $("#attrs-stand_time_attr").val($("#orig-stand_time_attr").val());
    $("#attrs-stand_fail_attr").val($("#orig-stand_fail_attr").val());
    $("#attrs-stand_trans_attr").val($("#orig-stand_trans_attr").val());
    $("#attrs-stand_disq_attr").val($("#orig-stand_disq_attr").val());
    $("#attrs-stand_self_row_attr").val($("#orig-stand_self_row_attr").val());
    $("#attrs-stand_v_row_attr").val($("#orig-stand_v_row_attr").val());
    $("#attrs-stand_r_row_attr").val($("#orig-stand_r_row_attr").val());
    $("#attrs-stand_u_row_attr").val($("#orig-stand_u_row_attr").val());
    copyCheckbox("attrs-enable_extra_col", "orig-enable_extra_col");
    $("#attrs-stand_extra_format").val($("#orig-stand_extra_format").val());
    $("#attrs-stand_extra_legend").val($("#orig-stand_extra_legend").val());
    $("#attrs-stand_extra_attr").val($("#orig-stand_extra_attr").val());
    copyCheckbox("attrs-stand_show_warn_number", "orig-stand_show_warn_number");
    $("#attrs-stand_warn_number_attr").val($("#orig-stand_warn_number_attr").val());
    $("#attrs-stand_page_table_attr").val($("#orig-stand_page_table_attr").val());
    $("#attrs-stand_page_cur_attr").val($("#orig-stand_page_cur_attr").val());
    $("#attrs-stand_page_row_attr").val($("#orig-stand_page_row_attr").val());
    $("#attrs-stand_page_col_attr").val($("#orig-stand_page_col_attr").val());

    if (skipField != null) {
        obj = document.getElementById("attrs-" + skipField);
        if (obj != null) obj.value = "";
    }

    if (e) e.stopPropagation();
    attrsDialogOnChange();
    $("#AttrsDialogDiv").dialog('open');
}

function attrsDialogOnChange()
{
    $("#attrs-stand_success_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_table_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_row_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_place_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_team_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_prob_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_solved_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_score_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#attrs-stand_penalty_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->score_system == SCORE_ACM || global->score_system == SCORE_MOSCOW" />);
    $("#attrs-stand_show_att_num-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#attrs-stand_sort_by_solved-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#attrs-stand_enable_penalty-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_KIROV || global->score_system == SCORE_OLYMPIAD" />);
    $("#attrs-ignore_success_time-div").toggle(<s:v type="jsbool" value="global->score_system == SCORE_ACM || global->score_system == SCORE_MOSCOW" />);
    $("#attrs-stand_time_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && $("#attrs-stand_show_ok_time").is(':checked'));
    $("#attrs-stand_fail_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_trans_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_disq_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked'));
    $("#attrs-stand_self_row_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->is_virtual > 0" />);
    $("#attrs-stand_v_row_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->is_virtual > 0" />);
    $("#attrs-stand_r_row_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->is_virtual > 0" />);
    $("#attrs-stand_u_row_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->is_virtual > 0" />);
    $("#attrs-stand_extra_format-div").toggle($("#attrs-enable_extra_col").is(':checked'));
    $("#attrs-stand_extra_legend-div").toggle($("#attrs-enable_extra_col").is(':checked'));
    $("#attrs-stand_extra_attr-div").toggle($(!$("#attrs-stand_fancy_style").is(':checked') && "#attrs-enable_extra_col").is(':checked'));
    $("#attrs-stand_warn_number_attr-div").toggle($(!$("#attrs-stand_fancy_style").is(':checked') && "#attrs-stand_show_warn_number").is(':checked'));
    $("#attrs-stand_page_table_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->users_on_page > 0" />);
    $("#attrs-stand_page_cur_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->users_on_page > 0" />);
    $("#attrs-stand_page_row_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->users_on_page > 0" />);
    $("#attrs-stand_page_col_attr-div").toggle(!$("#attrs-stand_fancy_style").is(':checked') && <s:v type="jsbool" value="global->users_on_page > 0" />);
}

function popupAdvancedDialog(e, skipField)
{
    $("#adv-appeal_deadline_time").val($("#orig-appeal_deadline_time").val());
    $("#adv-appeal_deadline_date").val($("#orig-appeal_deadline_date").val());
    copyCheckbox("adv-autoupdate_standings", "orig-autoupdate_standings");
    copyCheckbox("adv-use_ac_not_ok", "orig-use_ac_not_ok");
    $("#adv-rounding_mode").val($("#orig-rounding_mode").val());
    $("#adv-max_file_length").val($("#orig-max_file_length").val());
    $("#adv-max_line_length").val($("#orig-max_line_length").val());
    $("#adv-inactivity_timeout").val($("#orig-inactivity_timeout").val());
    copyCheckbox("adv-ignore_bom", "orig-ignore_bom");
    copyCheckbox("adv-disable_testing", "orig-disable_testing");
    copyCheckbox("adv-disable_auto_testing", "orig-disable_auto_testing");
    copyCheckbox("adv-show_astr_time", "orig-show_astr_time");
    copyCheckbox("adv-enable_report_upload", "orig-enable_report_upload");
    copyCheckbox("adv-enable_runlog_merge", "orig-enable_runlog_merge");
    copyCheckbox("adv-disable_user_database", "orig-disable_user_database");
    copyCheckbox("adv-enable_l10n", "orig-enable_l10n");
    $("#adv-charset").val($("#orig-charset").val());
    $("#adv-standings_charset").val($("#orig-standings_charset").val());
    $("#adv-stand2_charset").val($("#orig-stand2_charset").val());
    $("#adv-plog_charset").val($("#orig-plog_charset").val());
    $("#adv-cpu_bogomips").val($("#orig-cpu_bogomips").val());
    $("#adv-load_user_group").val($("#orig-load_user_group").val());
    $("#adv-clardb_plugin").val($("#orig-clardb_plugin").val());
    $("#adv-rundb_plugin").val($("#orig-rundb_plugin").val());
    $("#adv-xuser_plugin").val($("#orig-xuser_plugin").val());

    if (skipField != null) {
        if (skipField == "appeal_deadline") {
            $("#adv-appeal_deadline_time").val("");
            $("#adv-appeal_deadline_date").val("");
        } else if (skipField == "cpu_bogomips_detect") {
            $("#adv-cpu_bogomips").val(<s:v value="cpu_bogomips" />);
        } else {
            obj = document.getElementById("adv-" + skipField);
            if (obj != null) obj.value = "";
        }
    }

    if (e) e.stopPropagation();
    advancedDialogOnChange();
    $("#AdvancedDialogDiv").dialog('open');
}

function advancedDialogOnChange()
{
    $("#adv-disable_auto_testing-div").toggle(!$("#adv-disable_testing").is(':checked'));
    $("#adv-stand2_charset-div").toggle(<s:v type="jsbool" value="phr->ss->enable_stand2 && global->stand2_file_name[0]" />);
    $("#adv-plog_charset-div").toggle(<s:v type="jsbool" value="phr->ss->enable_plog && global->plog_file_name[0]" />);
}
</script>

<div id="GlobalAccordion">

    <h3>Main properties</h3>

    <div>
        <table border="0" onclick="popupMainDialog();">
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Contest time (HH:MM):</td>
<%
  contest_time_str[0] = 0;
  if (global->contest_time > 0) {
    snprintf(contest_time_str, sizeof(contest_time_str), "%d:%02d", global->contest_time / 60, global->contest_time % 60);
  }
%>
                <td><s:textfield id="orig-contest_time" readonly="readonly" check="false" name="param" value="contest_time_str" size="8" /><%
  if (global->contest_time <= 0) {
%><i>(Unlimited)</i><%
  }
%></td>
                <td><input type="button" onclick="popupMainDialog(event, 'contest_time')" value="Set unlimited" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:contest_time" /></td>
            </s:tr>

<%
  if (global->contest_time <= 0) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Contest end time:</td>
                <td><% html_date_select_2(out_f, global->contest_finish_time, "orig-contest_finish_time", "param", NULL, 1, 0, 0); %></td>
                <td><input type="button" onclick="popupMainDialog(event, 'contest_finish_time')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:contest_finish_time" /></td>
            </s:tr>
<%
  } else {
%>
            <% html_date_select_2(out_f, global->contest_finish_time, "orig-contest_finish_time", "param", NULL, 1, 1, 0); %>
<%
  }
%>

<%
  score_system = global->score_system;
  if (global->is_virtual) {
    if (global->score_system == SCORE_ACM) score_system = SCORE_TOTAL;
    else score_system = SCORE_TOTAL + 1;
  }
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Scoring system:</td>
                <td><select id="orig-score_system" disabled="disabled">
                    <s:option value="0" selectedExpr="score_system == 0">ACM</s:option>
                    <s:option value="1" selectedExpr="score_system == 1">Kirov</s:option>
                    <s:option value="2" selectedExpr="score_system == 2">Olympiad</s:option>
                    <s:option value="3" selectedExpr="score_system == 3">Moscow</s:option>
                    <s:option value="4" selectedExpr="score_system == 4">Virtual ACM</s:option>
                    <s:option value="5" selectedExpr="score_system == 5">Virtual Olympiad</s:option>
                </select></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:score_system" /></td>
            </s:tr>

<%
  board_fog_time_str[0] = 0;
  if (global->board_fog_time > 0) {
    snprintf(board_fog_time_str, sizeof(board_fog_time_str), "%d:%02d", global->board_fog_time / 60, global->board_fog_time % 60);
  }
  if (global->contest_time > 0) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Standings freeze time (HH:MM) before finish:</td>
                <td><s:textfield id="orig-board_fog_time" readonly="readonly" check="false" name="param" value="board_fog_time_str" size="8" /><%
    if (global->board_fog_time <= 0) {
%><i>(No freeze)</i><%
    }
%></td>
                <td><input type="button" onclick="popupMainDialog(event, 'board_fog_time')" value="Disable" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:board_fog_time" /></td>
            </s:tr>
<%
  } else {
%>
            <s:hidden id="orig-board_fog_time" check="false" name="param" value="board_fog_time_str" />
<%
  }
%>

<%
  board_unfog_time_str[0] = 0;
  if (global->board_unfog_time > 0) {
    snprintf(board_unfog_time_str, sizeof(board_unfog_time_str), "%d:%02d", global->board_unfog_time / 60, global->board_unfog_time % 60);
  }
  if (global->contest_time > 0 && global->board_fog_time > 0) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Standings unfreeze time (HH:MM) after finish:</td>
                <td><s:textfield check="false" id="orig-board_unfog_time" readonly="readonly" name="param" value="board_unfog_time_str" size="8" /><%
    if (global->board_unfog_time <= 0) {
%><i>(Not unfreeze)</i><%
    }
%></td>
                <td><input type="button" onclick="popupMainDialog(event, 'board_unfog_time')" value="Disable" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:board_unfog_time" /></td>
            </s:tr>
<%
  } else {
%>
            <s:hidden check="false" id="orig-board_unfog_time" name="param" value="board_unfog_time_str" />
<%
  }
%>

            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Use the default compilation server:</td>
                <td><s:yesno disabled="disabled" id="orig-use_compilation_server" name="param" value="!phr->ss->disable_compilation_server" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:use_compilation_server" /></td>
            </s:tr>

            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Enable Win32 languages:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_win32_languages" name="param" value="phr->ss->enable_win32_languages" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_win32_languages" /></td>
            </s:tr>

            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Calculate and store user-visible score separately:</td>
                <td><s:yesno disabled="disabled" id="orig-separate_user_score" name="param" value="global->separate_user_score" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:separate_user_score" /></td>
            </s:tr>

            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Run programs securely:</td>
                <td><s:yesno disabled="disabled" id="orig-secure_run" name="param" value="global->secure_run" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:secure_run" /></td>
            </s:tr>

<%
  if (global->secure_run > 0) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Enable support for MemoryLimit error:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_memory_limit_error" name="param" value="global->enable_memory_limit_error" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_memory_limit_error" /></td>
            </s:tr>

            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Detect security violations:</td>
                <td><s:yesno disabled="disabled" id="orig-detect_violations" name="param" value="global->detect_violations" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:detect_violations" /></td>
            </s:tr>
<%
  } else {
%>
            <s:hidden id="orig-enable_memory_limit_error" name="param" value="global->enable_memory_limit_error" />
            <s:hidden id="orig-detect_violations" name="param" value="global->detect_violations" />
<%
  }
%>

            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Assume max_stack_size == max_vm_size:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_max_stack_size" name="param" value="global->enable_max_stack_size" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_max_stack_size" /></td>
            </s:tr>

<%
  standings_locale = l10n_normalize(global->standings_locale);
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Standings locale:</td>
                <td><s:textfield id="orig-standings_locale" readonly="readonly" size="16" name="param" value="standings_locale" notset="yes" /></td>
                <td><input type="button" onclick="popupMainDialog(event, 'standings_locale')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:standings_locale" /></td>
            </s:tr>

<%
  checker_locale = l10n_normalize(global->checker_locale);
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Checker locale:</td>
                <td><s:textfield id="orig-checker_locale" readonly="readonly" size="16" name="param" value="checker_locale" notset="yes" /></td>
                <td><input type="button" onclick="popupMainDialog(event, 'checker_locale')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:checker_locale" /></td>
            </s:tr>

<%
  if (sizeof(long) == sizeof(long long)) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td>Compile 32-bit checkers on 64-bit platforms:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_32bit_checkers" name="param" value="global->enable_32bit_checkers" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_32bit_checkers" /></td>
            </s:tr>
<%
  } else {
%>
            <s:hidden id="orig-enable_32bit_checkers" name="param" value="global->enable_32bit_checkers" />
<%
  }
%>
        </table>
    </div>

    <h3>Contestant capabilities</h3>

    <div>
        <table border="0" onclick="popupCapsDialog()">
<%
  row = 1;
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-team_enable_src_view-div">
                <td><s:v value="caps_fields[0][1]" escape="false" />:</td>
                <td><s:yesno id="orig-team_enable_src_view" disabled="disabled" name="param" value="global->team_enable_src_view" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:team_enable_src_view" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_failed_test_view-div">
                <td><s:v value="caps_fields[1][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_failed_test_view" disabled="disabled" name="param" value="global->disable_failed_test_view" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_failed_test_view" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-team_enable_rep_view-div">
                <td><s:v value="caps_fields[2][1]" escape="false" />:</td>
                <td><s:yesno id="orig-team_enable_rep_view" disabled="disabled" name="param" value="global->team_enable_rep_view" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:team_enable_rep_view" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-team_enable_ce_view-div">
                <td><s:v value="caps_fields[3][1]" escape="false" />:</td>
                <td><s:yesno id="orig-team_enable_ce_view" disabled="disabled" name="param" value="global->team_enable_ce_view" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:team_enable_ce_view" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-team_show_judge_report-div">
                <td><s:v value="caps_fields[4][1]" escape="false" />:</td>
                <td><s:yesno id="orig-team_show_judge_report" disabled="disabled" name="param" value="global->team_show_judge_report" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:team_show_judge_report" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-report_error_code-div">
                <td><s:v value="caps_fields[5][1]" escape="false" />:</td>
                <td><s:yesno id="orig-report_error_code" disabled="disabled" name="param" value="global->report_error_code" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:report_error_code" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_clars-div">
                <td><s:v value="caps_fields[6][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_clars" disabled="disabled" name="param" value="global->disable_clars" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_clars" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_team_clars-div">
                <td><s:v value="caps_fields[7][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_team_clars" disabled="disabled" name="param" value="global->disable_team_clars" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_team_clars" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_eoln_select-div">
                <td><s:v value="caps_fields[8][1]" escape="false" />:</td>
                <td><s:yesno id="orig-enable_eoln_select" disabled="disabled" name="param" value="global->enable_eoln_select" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_eoln_select" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_submit_after_ok-div">
                <td><s:v value="caps_fields[9][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_submit_after_ok" disabled="disabled" name="param" value="global->disable_submit_after_ok" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_submit_after_ok" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-ignore_compile_errors-div">
                <td><s:v value="caps_fields[10][1]" escape="false" />:</td>
                <td><s:yesno id="orig-ignore_compile_errors" disabled="disabled" name="param" value="global->ignore_compile_errors" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:ignore_compile_errors" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-ignore_duplicated_runs-div">
                <td><s:v value="caps_fields[11][1]" escape="false" />:</td>
                <td><s:yesno id="orig-ignore_duplicated_runs" disabled="disabled" name="param" value="global->ignore_duplicated_runs" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:ignore_duplicated_runs" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-show_deadline-div">
                <td><s:v value="caps_fields[12][1]" escape="false" />:</td>
                <td><s:yesno id="orig-show_deadline" disabled="disabled" name="param" value="global->show_deadline" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:show_deadline" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-show_sha1-div">
                <td><s:v value="caps_fields[13][1]" escape="false" />:</td>
                <td><s:yesno id="orig-show_sha1" disabled="disabled" name="param" value="global->show_sha1" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:show_sha1" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-show_judge_identity-div">
                <td><s:v value="caps_fields[14][1]" escape="false" />:</td>
                <td><s:yesno id="orig-show_judge_identity" disabled="disabled" name="param" value="global->show_judge_identity" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:show_judge_identity" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_printing-div">
                <td><s:v value="caps_fields[15][1]" escape="false" />:</td>
                <td><s:yesno id="orig-enable_printing" disabled="disabled" name="param" value="global->enable_printing" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_printing" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_banner_page-div">
                <td><s:v value="caps_fields[16][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_banner_page" disabled="disabled" name="param" value="global->disable_banner_page" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_banner_page" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-printout_uses_login-div">
                <td><s:v value="caps_fields[17][1]" escape="false" />:</td>
                <td><s:yesno id="orig-printout_uses_login" disabled="disabled" name="param" value="global->printout_uses_login" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:printout_uses_login" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-prune_empty_users-div">
                <td><s:v value="caps_fields[18][1]" escape="false" />:</td>
                <td><s:yesno id="orig-prune_empty_users" disabled="disabled" name="param" value="global->prune_empty_users" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:prune_empty_users" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_full_archive-div">
                <td><s:v value="caps_fields[19][1]" escape="false" />:</td>
                <td><s:yesno id="orig-enable_full_archive" disabled="disabled" name="param" value="global->enable_full_archive" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_full_archive" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-always_show_problems-div">
                <td><s:v value="caps_fields[20][1]" escape="false" />:</td>
                <td><s:yesno id="orig-always_show_problems" disabled="disabled" name="param" value="global->always_show_problems" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:always_show_problems" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_user_standings-div">
                <td><s:v value="caps_fields[21][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_user_standings" disabled="disabled" name="param" value="global->disable_user_standings" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_user_standings" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_language-div">
                <td><s:v value="caps_fields[22][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_language" disabled="disabled" name="param" value="global->disable_language" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_language" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-problem_navigation-div">
                <td><s:v value="caps_fields[23][1]" escape="false" />:</td>
                <td><s:yesno id="orig-problem_navigation" disabled="disabled" name="param" value="global->problem_navigation" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:problem_navigation" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-vertical_navigation-div">
                <td><s:v value="caps_fields[24][1]" escape="false" />:</td>
                <td><s:yesno id="orig-vertical_navigation" disabled="disabled" name="param" value="global->vertical_navigation" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:vertical_navigation" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_virtual_start-div">
                <td><s:v value="caps_fields[25][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_virtual_start" disabled="disabled" name="param" value="global->disable_virtual_start" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_virtual_start" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_virtual_auto_judge-div">
                <td><s:v value="caps_fields[26][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_virtual_auto_judge" disabled="disabled" name="param" value="global->disable_virtual_auto_judge" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_virtual_auto_judge" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_auto_print_protocol-div">
                <td><s:v value="caps_fields[27][1]" escape="false" />:</td>
                <td><s:yesno id="orig-enable_auto_print_protocol" disabled="disabled" name="param" value="global->enable_auto_print_protocol" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_auto_print_protocol" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-notify_clar_reply-div">
                <td><s:v value="caps_fields[28][1]" escape="false" />:</td>
                <td><s:yesno id="orig-notify_clar_reply" disabled="disabled" name="param" value="global->notify_clar_reply" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:notify_clar_reply" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-notify_status_change-div">
                <td><s:v value="caps_fields[29][1]" escape="false" />:</td>
                <td><s:yesno id="orig-notify_status_change" disabled="disabled" name="param" value="global->notify_status_change" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:notify_status_change" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_auto_refresh-div">
                <td><s:v value="caps_fields[30][1]" escape="false" />:</td>
                <td><s:yesno id="orig-disable_auto_refresh" disabled="disabled" name="param" value="global->disable_auto_refresh" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_auto_refresh" /></td>
            </s:tr>
        </table>
    </div>

    <h3>Files and directories</h3>

    <div>
        <table border="0" onclick="popupFilesDialog()">

<%
  row = 1;
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-advanced_layout-div">
                <td>Advanced problem files layout:</td>
                <td><s:yesno id="orig-advanced_layout" disabled="disabled" name="param" value="global->advanced_layout" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:advanced_layout" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-uuid_run_store-div">
                <td>Use UUID instead of run_id to store runs:</td>
                <td><s:yesno id="orig-uuid_run_store" disabled="disabled" name="param" value="global->uuid_run_store" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:uuid_run_store" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-test_dir-div">
                <td>Directory for tests (relative to contest configuration dir):</td>
                <td><s:textfield id="orig-test_dir" readonly="readonly" name="param" value="global->test_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupFilesDialog(event, 'test_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:test_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-corr_dir-div">
                <td>Directory for correct answers (relative to contest configuration dir):</td>
                <td><s:textfield id="orig-corr_dir" readonly="readonly" name="param" value="global->corr_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupFilesDialog(event, 'corr_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:corr_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-info_dir-div">
                <td>Directory for test info files (relative to contest configuration dir):</td>
                <td><s:textfield id="orig-info_dir" readonly="readonly" name="param" value="global->info_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupFilesDialog(event, 'info_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:info_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-tgz_dir-div">
                <td>Directory for test tgz files (relative to contest configuration dir):</td>
                <td><s:textfield id="orig-tgz_dir" readonly="readonly" name="param" value="global->tgz_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupFilesDialog(event, 'tgz_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:tgz_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-checker_dir-div">
                <td>Directory for checkers (relative to contest configuration dir):</td>
                <td><s:textfield id="orig-checker_dir" readonly="readonly" name="param" value="global->checker_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupFilesDialog(event, 'checker_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:checker_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-statement_dir-div">
                <td>Directory for problem statements (relative to contest configuration dir):</td>
                <td><s:textfield id="orig-statement_dir" readonly="readonly" name="param" value="global->statement_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupFilesDialog(event, 'statement_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:statement_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-contest_start_cmd-div">
                <td>Contest start script:</td>
                <td><s:textfield id="orig-contest_start_cmd" readonly="readonly" name="param" value="global->contest_start_cmd" size="48" maxlength="1024" /></td>
                <td onclick="np(event);"><input type="button" onclick="popupFilesDialog(event, 'contest_start_cmd')" value="Clear" />[<s:a ac="glob-edit-contest-start-cmd-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:contest_start_cmd" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-contest_stop_cmd-div">
                <td>Contest stop script:</td>
                <td><s:textfield id="orig-contest_stop_cmd" readonly="readonly" name="param" value="global->contest_stop_cmd" size="48" maxlength="1024" /></td>
                <td onclick="np(event);"><input type="button" onclick="popupFilesDialog(event, 'contest_stop_cmd')" value="Clear" />[<s:a ac="glob-edit-contest-stop-cmd-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:contest_stop_cmd" /></td>
            </s:tr>
        </table>
    </div>

    <h3>Contestant quotas</h3>

    <div>
        <table border="0" onclick="popupQuotasDialog()">
<%
  row = 1;
%>
<%
  ll_to_size_str(hbuf, sizeof(hbuf), global->max_run_size);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_run_size-div" >
                <td>Maximum size of one submitted program:</td>
                <td><s:textfield id="orig-max_run_size" readonly="readonly" name="param" value="hbuf" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_run_size" /></td>
            </s:tr>
<%
  ll_to_size_str(hbuf, sizeof(hbuf), global->max_run_total);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_run_total-div">
                <td>Maximum total size of all submitted programs:</td>
                <td><s:textfield id="orig-max_run_total" readonly="readonly" name="param" value="hbuf" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_run_total" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_run_num-div">
                <td>Maximum number of submits:</td>
                <td><s:textfield id="orig-max_run_num" readonly="readonly" name="param" value="global->max_run_num" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_run_num" /></td>
            </s:tr>
<%
  ll_to_size_str(hbuf, sizeof(hbuf), global->max_clar_size);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_clar_size-div">
                <td>Maximum size of one clarification request:</td>
                <td><s:textfield id="orig-max_clar_size" readonly="readonly" name="param" value="hbuf" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_clar_size" /></td>
            </s:tr>
<%
  num_to_size_str(hbuf, sizeof(hbuf), global->max_clar_total);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_clar_total-div">
                <td>Maximum size of all clarification requests:</td>
                <td><s:textfield id="orig-max_clar_total" readonly="readonly" name="param" value="hbuf" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_clar_total" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_clar_num-div">
                <td>Maximum number of clarification requests:</td>
                <td><s:textfield id="orig-max_clar_num" readonly="readonly" name="param" value="global->max_clar_num" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_clar_num" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-team_page_quota-div">
                <td>Maximum number of printed pages:</td>
                <td><s:textfield id="orig-team_page_quota" readonly="readonly" name="param" value="global->team_page_quota" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:team_page_quota" /></td>
            </s:tr>
        </table>
    </div>

    <h3>Standings files and URLs</h3>

    <div>
        <table border="0" onclick="popupUrlsDialog()">
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-team_info_url-div">
                <td>URL to view detailed contestant information:</td>
                <td><s:textfield readonly="readonly" id="orig-team_info_url" name="param" value="global->team_info_url" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'team_info_url')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:team_info_url" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-prob_info_url-div">
                <td>URL to view problem statement:</td>
                <td><s:textfield readonly="readonly" id="orig-prob_info_url" name="param" value="global->prob_info_url" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'prob_info_url')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:prob_info_url" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-standings_file_name-div">
                <td>Name of the current standings file:</td>
                <td><s:textfield readonly="readonly" id="orig-standings_file_name" name="param" value="global->standings_file_name" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'standings_file_name')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:standings_file_name" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-users_on_page-div">
                <td>Number of users on standings page:</td>
                <td><s:textfield readonly="readonly" id="orig-users_on_page" name="param" value="global->users_on_page" size="48" maxlength="1024" checkExpr="> 0" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:users_on_page" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_header_file-div">
                <td>HTML header file for the standings:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_header_file" name="param" value="global->stand_header_file" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand_header_file')" value="Clear" />[<s:a ac="glob-edit-stand-header-file-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_header_file" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_footer_file-div">
                <td>HTML footer file for the standings:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_footer_file" name="param" value="global->stand_footer_file" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand_footer_file')" value="Clear" />[<s:a ac="glob-edit-stand-footer-file-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_footer_file" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_symlink_dir-div">
                <td>Directory to make standings symlink (rel. to DocumentRoot):</td>
                <td><s:textfield readonly="readonly" id="orig-stand_symlink_dir" name="param" value="global->stand_symlink_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand_symlink_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_symlink_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_ignore_after-div">
                <td>Ignore submissions after:</td>
                <td><% html_date_select_2(out_f, global->stand_ignore_after, "orig-stand_ignore_after", "param", NULL, 1, 0, 0); %></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand_ignore_after')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_ignore_after" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_stand2-div">
                <td>Enable supplementary standings table:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_stand2" name="param" value="phr->ss->enable_stand2" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_stand2" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand2_file_name-div">
                <td>Name of the supplementary standings file:</td>
                <td><s:textfield readonly="readonly" id="orig-stand2_file_name" name="param" value="global->stand2_file_name" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand2_file_name')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand2_file_name" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand2_header_file-div">
                <td>HTML header file for the supplementary standings:</td>
                <td><s:textfield readonly="readonly" id="orig-stand2_header_file" name="param" value="global->stand2_header_file" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand2_header_file')" value="Clear" />[<s:a ac="glob-edit-stand2-header-file-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand2_header_file" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand2_footer_file-div">
                <td>HTML footer file for the supplementary standings:</td>
                <td><s:textfield readonly="readonly" id="orig-stand2_footer_file" name="param" value="global->stand2_footer_file" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand2_footer_file')" value="Clear" />[<s:a ac="glob-edit-stand2-footer-file-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand2_footer_file" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand2_symlink_dir-div">
                <td>Directory to make suppl. standings symlink (rel. to DocumentRoot):</td>
                <td><s:textfield readonly="readonly" id="orig-stand2_symlink_dir" name="param" value="global->stand2_symlink_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'stand2_symlink_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand2_symlink_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_plog-div">
                <td>Enable public submission log:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_plog" name="param" value="phr->ss->enable_plog" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_plog" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-plog_file_name-div">
                <td>Name of the public submission log file:</td>
                <td><s:textfield readonly="readonly" id="orig-plog_file_name" name="param" value="global->plog_file_name" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'plog_file_name')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:plog_file_name" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-plog_header_file-div">
                <td>HTML header file for the public submission log:</td>
                <td><s:textfield readonly="readonly" id="orig-plog_header_file" name="param" value="global->plog_header_file" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'plog_header_file')" value="Clear" />[<s:a ac="glob-edit-plog-header-file-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:plog_header_file" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-plog_footer_file-div">
                <td>HTML footer file for the public submission log:</td>
                <td><s:textfield readonly="readonly" id="orig-plog_footer_file" name="param" value="global->plog_footer_file" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'plog_footer_file')" value="Clear" />[<s:a ac="glob-edit-plog-footer-file-page">Edit</s:a>]</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:plog_footer_file" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-plog_symlink_dir-div">
                <td>Directory to make symlink to public submission log (rel. to DocumentRoot):</td>
                <td><s:textfield readonly="readonly" id="orig-plog_symlink_dir" name="param" value="global->plog_symlink_dir" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupUrlsDialog(event, 'plog_symlink_dir')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:plog_symlink_dir" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-plog_update_time-div">
                <td>Public submission log update interval (sec):</td>
                <td><s:textfield readonly="readonly" id="orig-plog_update_time" name="param" value="global->plog_update_time" size="48" maxlength="1024" check="> 0" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:plog_update_time" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-external_xml_update_time-div">
                <td>External XML log update interval (sec):</td>
                <td><s:textfield readonly="readonly" id="orig-external_xml_update_time" name="param" value="global->external_xml_update_time" size="48" maxlength="1024" check="> 0" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:external_xml_update_time" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-internal_xml_update_time-div">
                <td>Internal XML log update interval (sec):</td>
                <td><s:textfield readonly="readonly" id="orig-internal_xml_update_time" name="param" value="global->internal_xml_update_time" size="48" maxlength="1024" check="> 0" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:internal_xml_update_time" /></td>
            </s:tr>
        </table>
    </div>

    <h3>Standings table attributes</h3>

    <div>
        <table border="0" onclick="popupAttrsDialog()">
<%
  row = 1;
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_fancy_style-div">
                <td>Use fancy decorations:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_fancy_style" name="param" value="global->stand_fancy_style" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_fancy_style" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_success_attr-div">
                <td>HTML attributes for &quot;Last success&quot; note:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_success_attr" name="param" value="global->stand_success_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_success_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_success_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_table_attr-div">
                <td>HTML attributes for standings table:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_table_attr" name="param" value="global->stand_table_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_table_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_table_attr" /></td>
            </s:tr>
<%
    xstr = 0;
    if (global->stand_row_attr && global->stand_row_attr[0]) xstr = sarray_unparse_2(global->stand_row_attr);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_row_attr-div">
                <td>Standings row attributes:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_row_attr" name="param" value="xstr" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_row_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_row_attr" /></td>
            </s:tr>
<%
  xfree(xstr); xstr = 0;
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_place_attr-div">
                <td>HTML attributes for the &quot;Place&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_place_attr" name="param" value="global->stand_place_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_place_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_place_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_team_attr-div">
                <td>HTML attributes for the &quot;Team name&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_team_attr" name="param" value="global->stand_team_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_team_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_team_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_prob_attr-div">
                <td>HTML attributes for the &quot;Problems&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_prob_attr" name="param" value="global->stand_prob_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_prob_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_prob_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_solved_attr-div">
                <td>HTML attributes for the &quot;Solved&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_solved_attr" name="param" value="global->stand_solved_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_solved_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_solved_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_score_attr-div">
                <td>HTML attributes for the &quot;Score&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_score_attr" name="param" value="global->stand_score_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_score_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_score_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_penalty_attr-div">
                <td>HTML attributes for the &quot;Penalty&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_penalty_attr" name="param" value="global->stand_penalty_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_penalty_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_penalty_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_use_login-div">
                <td>Use login instead of name:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_use_login" name="param" value="global->stand_use_login" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_use_login" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_show_ok_time-div">
                <td>Show success time in standings:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_show_ok_time" name="param" value="global->stand_show_ok_time" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_show_ok_time" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_show_att_num-div">
                <td>Show number of attempts in standings:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_show_att_num" name="param" value="global->stand_show_att_num" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_show_att_num" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_sort_by_solved-div">
                <td>Sort participants by the solved problems first:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_sort_by_solved" name="param" value="global->stand_sort_by_solved" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_sort_by_solved" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_enable_penalty-div">
                <td>Enable time penalties:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_enable_penalty" name="param" value="global->stand_enable_penalty" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_enable_penalty" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-ignore_success_time-div">
                <td>Ignore success time in penalty calculation:</td>
                <td><s:yesno disabled="disabled" id="orig-ignore_success_time" name="param" value="global->ignore_success_time" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:ignore_success_time" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_time_attr-div">
                <td>HTML attributes for the success time:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_time_attr" name="param" value="global->stand_time_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_time_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_time_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_fail_attr-div">
                <td>HTML attributes for &quot;Check failed&quot; cells:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_fail_attr" name="param" value="global->stand_fail_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_fail_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_fail_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_trans_attr-div">
                <td>HTML attributes for transient cells:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_trans_attr" name="param" value="global->stand_trans_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_trans_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_trans_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_disq_attr-div">
                <td>HTML attributes for &quot;Disqualified&quot; cells:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_disq_attr" name="param" value="global->stand_disq_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_disq_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_disq_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_self_row_attr-div">
                <td>HTML attributes for the participant's table row:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_self_row_attr" name="param" value="global->stand_self_row_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_self_row_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_self_row_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_v_row_attr-div">
                <td>HTML attributes for the virtual participant's rows:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_v_row_attr" name="param" value="global->stand_v_row_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_v_row_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_v_row_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_r_row_attr-div">
                <td>HTML attributes for the real participant's rows:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_r_row_attr" name="param" value="global->stand_r_row_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_r_row_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_r_row_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_u_row_attr-div">
                <td>HTML attributes for the unknown participant's rows:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_u_row_attr" name="param" value="global->stand_u_row_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_u_row_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_u_row_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_extra_col-div">
                <td>Show &quot;Extra information&quot; column:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_extra_col" name="param" value="phr->ss->enable_extra_col" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:globalenable_extra_col:" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_extra_format-div">
                <td>Format string for &quot;Extra information&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_extra_format" name="param" value="global->stand_extra_format" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_extra_format')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_extra_format" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_extra_legend-div">
                <td>Column title for &quot;Extra information&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_extra_legend" name="param" value="global->stand_extra_legend" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_extra_legend')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_extra_legend" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_extra_attr-div">
                <td>HTML attributes for &quot;Extra information&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_extra_attr" name="param" value="global->stand_extra_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_extra_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_extra_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_show_warn_number-div">
                <td>Show &quot;Warnings&quot; column:</td>
                <td><s:yesno disabled="disabled" id="orig-stand_show_warn_number" name="param" value="global->stand_show_warn_number" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_show_warn_number" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_warn_number_attr-div">
                <td>HTML attributes for &quot;Warnings&quot; column:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_warn_number_attr" name="param" value="global->stand_warn_number_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_warn_number_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_warn_number_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_page_table_attr-div">
                <td>HTML attributes for page table:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_page_table_attr" name="param" value="global->stand_page_table_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_page_table_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_page_table_attr" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_page_cur_attr-div">
                <td>HTML attributes for current page message:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_page_cur_attr" name="param" value="global->stand_page_cur_attr" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_page_cur_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_page_cur_attr" /></td>
            </s:tr>
<%
    xstr = 0;
    if (global->stand_page_row_attr && global->stand_page_row_attr[0]) xstr = sarray_unparse_2(global->stand_page_row_attr);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_page_row_attr-div">
                <td>Page table row attributes:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_page_row_attr" name="param" value="xstr" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_page_row_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_page_row_attr" /></td>
            </s:tr>
<%
    xfree(xstr); xstr = 0;
%>
<%
    xstr = 0;
    if (global->stand_page_col_attr && global->stand_page_col_attr[0]) xstr = sarray_unparse_2(global->stand_page_col_attr);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand_page_col_attr-div">
                <td>Page table column attributes:</td>
                <td><s:textfield readonly="readonly" id="orig-stand_page_col_attr" name="param" value="xstr" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAttrsDialog(event, 'stand_page_col_attr')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand_page_col_attr" /></td>
            </s:tr>
<%
    xfree(xstr); xstr = 0;
%>
        </table>
    </div>

    <h3>Advanced settings</h3>

    <div>
        <table border="0" onclick="popupAdvancedDialog()">
<%
  row = 1;
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-appeal_deadline-div">
                <td>Appeal deadline:</td>
                <td><% html_date_select_2(out_f, global->appeal_deadline, "orig-appeal_deadline", "param", NULL, 1, 0, 0); %></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'appeal_deadline')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:appeal_deadline" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-autoupdate_standings-div">
                <td>Update standings automatically (except freeze time):</td>
                <td><s:yesno disabled="disabled" id="orig-autoupdate_standings" name="param" value="global->autoupdate_standings" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:autoupdate_standings" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-use_ac_not_ok-div">
                <td>Use PR (Pending Review) status instead of OK:</td>
                <td><s:yesno disabled="disabled" id="orig-use_ac_not_ok" name="param" value="global->use_ac_not_ok" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:use_ac_not_ok" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-rounding_mode-div">
                <td>Seconds to minutes rounding mode:</td>
                <td><select id="orig-rounding_mode" name="param" disabled="disabled">
                    <s:option value="0" selectedExpr="global->rounding_mode == 0">Truncating up (ceil)</s:option>
                    <s:option value="1" selectedExpr="global->rounding_mode == 1">Truncating down (floor)</s:option>
                    <s:option value="2" selectedExpr="global->rounding_mode == 2">Rounding</s:option>
                </select></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:rounding_mode" /></td>
            </s:tr>
<%
  num_to_size_str(hbuf, sizeof(hbuf), global->max_file_length);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_file_length-div">
                <td>Maximal file size to be included into testing protocol:</td>
                <td><s:textfield readonly="readonly" id="orig-max_file_length" name="param" value="hbuf" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_file_length" /></td>
            </s:tr>
<%
  num_to_size_str(hbuf, sizeof(hbuf), global->max_line_length);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-max_line_length-div">
                <td>Maximal line length to be included into testing protocol:</td>
                <td><s:textfield readonly="readonly" id="orig-max_line_length" name="param" value="hbuf" size="48" maxlength="1024" check="false" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:max_line_length" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-inactivity_timeout-div">
                <td>Inactivity timeout:</td>
                <td><s:textfield readonly="readonly" id="orig-inactivity_timeout" name="param" value="global->inactivity_timeout" size="48" maxlength="1024" check="> 0" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:inactivity_timeout" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-ignore_bom-div">
                <td>Ignore BOM in text submits:</td>
                <td><s:yesno disabled="disabled" id="orig-ignore_bom" name="param" value="global->ignore_bom" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:ignore_bom" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_testing-div">
                <td>Disable any testing of submissions:</td>
                <td><s:yesno disabled="disabled" id="orig-disable_testing" name="param" value="global->disable_testing" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_testing" /></td>
            </s:tr>
<%
  if (global->disable_testing <= 0) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_auto_testing-div">
                <td>Disable automatic testing of submissions:</td>
                <td><s:yesno disabled="disabled" id="orig-disable_auto_testing" name="param" value="global->disable_auto_testing" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_auto_testing" /></td>
            </s:tr>
<%
  }
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-show_astr_time-div">
                <td>Show astronomic time instead of relative time:</td>
                <td><s:yesno disabled="disabled" id="orig-show_astr_time" name="param" value="global->show_astr_time" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:show_astr_time" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_report_upload-div">
                <td>Enable testing protocol upload:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_report_upload" name="param" value="global->enable_report_upload" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_report_upload" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_runlog_merge-div">
                <td>Enable run database importing and merging:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_runlog_merge" name="param" value="global->enable_runlog_merge" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_runlog_merge" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-disable_user_database-div">
                <td>Disable user database loading:</td>
                <td><s:yesno disabled="disabled" id="orig-disable_user_database" name="param" value="global->disable_user_database" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:disable_user_database" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-enable_l10n-div">
                <td>Enable message translation:</td>
                <td><s:yesno disabled="disabled" id="orig-enable_l10n" name="param" value="global->enable_l10n" /></td>
                <td>&nbsp;</td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:enable_l10n" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-charset-div">
                <td>Character set:</td>
                <td><s:textfield readonly="readonly" id="orig-charset" name="param" value="global->charset" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'charset')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:charset" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-standings_charset-div">
                <td>Standings character set:</td>
                <td><s:textfield readonly="readonly" id="orig-standings_charset" name="param" value="global->standings_charset" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'standings_charset')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:standings_charset" /></td>
            </s:tr>
<%
  if (phr->ss->enable_stand2 && global->stand2_file_name[0]) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-stand2_charset-div">
                <td>Aux. standings character set:</td>
                <td><s:textfield readonly="readonly" id="orig-stand2_charset" name="param" value="global->stand2_charset" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'stand2_charset')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:stand2_charset" /></td>
            </s:tr>
<%
  }
%>

<%
  if (phr->ss->enable_plog && global->plog_file_name[0]) {
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-plog_charset-div">
                <td>Submission log character set:</td>
                <td><s:textfield readonly="readonly" id="orig-plog_charset" name="param" value="global->plog_charset" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'plog_charset')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:plog_charset" /></td>
            </s:tr>
<%
  }
%>

            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-cpu_bogomips-div">
                <td>CPU speed (BogoMIPS):</td>
                <td><s:textfield readonly="readonly" id="orig-cpu_bogomips" name="param" value="global->cpu_bogomips" size="48" maxlength="1024" checkExpr=" > 0" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'cpu_bogomips')" value="Clear" /><input type="button" onclick="popupAdvancedDialog(event, 'cpu_bogomips_detect')" value="Detect" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:cpu_bogomips" /></td>
            </s:tr>
<%
  xstr = 0;
  if (global->load_user_group && global->load_user_group[0]) xstr = sarray_unparse_2(global->load_user_group);
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-load_user_group-div">
                <td>User groups to load:</td>
                <td><s:textfield readonly="readonly" id="orig-load_user_group" name="param" value="xstr" size="48" maxlength="1024" checkExpr="" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'load_user_group')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:load_user_group" /></td>
            </s:tr>
<%
  xfree(xstr); xstr = 0;
%>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-clardb_plugin-div">
                <td>ClarDB storage engine:</td>
                <td><s:textfield readonly="readonly" id="orig-clardb_plugin" name="param" value="global->clardb_plugin" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'clardb_plugin')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:clardb_plugin" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-rundb_plugin-div">
                <td>RunDB storage engine:</td>
                <td><s:textfield readonly="readonly" id="orig-rundb_plugin" name="param" value="global->rundb_plugin" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'rundb_plugin')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:rundb_plugin" /></td>
            </s:tr>
            <s:tr attr="form_row_attrs[row ^= 1]" id="orig-xuser_plugin-div">
                <td>XuserDB storage engine:</td>
                <td><s:textfield readonly="readonly" id="orig-xuser_plugin" name="param" value="global->xuser_plugin" size="48" maxlength="1024" check="false" /></td>
                <td><input type="button" onclick="popupAdvancedDialog(event, 'xuser_plugin')" value="Clear" /></td>
                <td onclick="np(event);"><s:help topic="Serve.cfg:global:xuser_plugin" /></td>
            </s:tr>
        </table>
    </div>

<%
  if (global->unhandled_vars) {
%>

    <h3>Uneditable parameters</h3>

    <div>
        <table border="0">
<%
  row = 1;
%>
            <s:tr attr="form_row_attrs[row ^= 1]">
                <td colspan="4"><pre><s:v value="global->unhandled_vars" /></pre></td>
            </s:tr>
        </table>
    </div>
<%
  }
%>
</div>

<%
bottom_links: ;
%>

<%@include "cnts_edit_cur_bottom_menu.csp"
%>

<%@include "footer.csp"
%><%
cleanup:
  l10n_resetlocale();
  html_armor_free(&ab);
%>
